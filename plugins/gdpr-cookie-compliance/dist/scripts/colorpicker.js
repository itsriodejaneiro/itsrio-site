!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.postscribe=e():t.postscribe=e()}(this,function(){return function(t){function e(i){if(r[i])return r[i].exports;var o=r[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";var i=r(1),o=function(t){return t&&t.__esModule?t:{default:t}}(i);t.exports=o.default},function(t,e,r){"use strict";function i(){}function o(){var t=d.shift();if(t){var e=h.last(t);e.afterDequeue(),t.stream=n.apply(void 0,t),e.afterStreamStart()}}function n(t,e,r){function n(t){t=r.beforeWrite(t),g.write(t),r.afterWrite(t)}g=new l.default(t,r),g.id=f++,g.name=r.name||g.id,s.streams[g.name]=g;var c=t.ownerDocument,u={close:c.close,open:c.open,write:c.write,writeln:c.writeln};a(c,{close:i,open:i,write:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return n(e.join(""))},writeln:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return n(e.join("")+"\n")}});var h=g.win.onerror||i;return g.win.onerror=function(t,e,i){r.error({msg:t+" - "+e+": "+i}),h.apply(g.win,[t,e,i])},g.write(e,function(){a(c,u),g.win.onerror=h,r.done(),g=null,o()}),g}function s(t,e,r){if(h.isFunction(r))r={done:r};else if("clear"===r)return d=[],g=null,void(f=0);r=h.defaults(r,p),t=/^#/.test(t)?window.document.getElementById(t.substr(1)):t.jquery?t[0]:t;var n=[t,e,r];return t.postscribe={cancel:function(){n.stream?n.stream.abort():n[1]=i}},r.beforeEnqueue(n),d.push(n),g||o(),t.postscribe}e.__esModule=!0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};e.default=s;var c=r(2),l=function(t){return t&&t.__esModule?t:{default:t}}(c),u=r(4),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(u),p={afterAsync:i,afterDequeue:i,afterStreamStart:i,afterWrite:i,autoFix:!0,beforeEnqueue:i,beforeWriteToken:function(t){return t},beforeWrite:function(t){return t},done:i,error:function(t){throw new Error(t.msg)},releaseAsync:!1},f=0,d=[],g=null;a(s,{streams:{},queue:d,WriteStream:l.default})},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){var r=h+e,i=t.getAttribute(r);return u.existy(i)?String(i):i}function n(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=h+e;u.existy(r)&&""!==r?t.setAttribute(i,r):t.removeAttribute(i)}e.__esModule=!0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},a=r(3),c=function(t){return t&&t.__esModule?t:{default:t}}(a),l=r(4),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(l),h="data-ps-",p="ps-style",f="ps-script",d=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.root=e,this.options=r,this.doc=e.ownerDocument,this.win=this.doc.defaultView||this.doc.parentWindow,this.parser=new c.default("",{autoFix:r.autoFix}),this.actuals=[e],this.proxyHistory="",this.proxyRoot=this.doc.createElement(e.nodeName),this.scriptStack=[],this.writeQueue=[],n(this.proxyRoot,"proxyof",0)}return t.prototype.write=function(){var t;for((t=this.writeQueue).push.apply(t,arguments);!this.deferredRemote&&this.writeQueue.length;){var e=this.writeQueue.shift();u.isFunction(e)?this._callFunction(e):this._writeImpl(e)}},t.prototype._callFunction=function(t){var e={type:"function",value:t.name||t.toString()};this._onScriptStart(e),t.call(this.win,this.doc),this._onScriptDone(e)},t.prototype._writeImpl=function(t){this.parser.append(t);for(var e=void 0,r=void 0,i=void 0,o=[];(e=this.parser.readToken())&&!(r=u.isScript(e))&&!(i=u.isStyle(e));)(e=this.options.beforeWriteToken(e))&&o.push(e);o.length>0&&this._writeStaticTokens(o),r&&this._handleScriptToken(e),i&&this._handleStyleToken(e)},t.prototype._writeStaticTokens=function(t){var e=this._buildChunk(t);return e.actual?(e.html=this.proxyHistory+e.actual,this.proxyHistory+=e.proxy,this.proxyRoot.innerHTML=e.html,this._walkChunk(),e):null},t.prototype._buildChunk=function(t){for(var e=this.actuals.length,r=[],i=[],o=[],n=t.length,s=0;s<n;s++){var a=t[s],c=a.toString();if(r.push(c),a.attrs){if(!/^noscript$/i.test(a.tagName)){var l=e++;i.push(c.replace(/(\/?>)/," "+h+"id="+l+" $1")),a.attrs.id!==f&&a.attrs.id!==p&&o.push("atomicTag"===a.type?"":"<"+a.tagName+" "+h+"proxyof="+l+(a.unary?" />":">"))}}else i.push(c),o.push("endTag"===a.type?c:"")}return{tokens:t,raw:r.join(""),actual:i.join(""),proxy:o.join("")}},t.prototype._walkChunk=function(){for(var t=void 0,e=[this.proxyRoot];u.existy(t=e.shift());){var r=1===t.nodeType;if(!(r&&o(t,"proxyof"))){r&&(this.actuals[o(t,"id")]=t,n(t,"id"));var i=t.parentNode&&o(t.parentNode,"proxyof");i&&this.actuals[i].appendChild(t)}e.unshift.apply(e,u.toArray(t.childNodes))}},t.prototype._handleScriptToken=function(t){var e=this,r=this.parser.clear();r&&this.writeQueue.unshift(r),t.src=t.attrs.src||t.attrs.SRC,(t=this.options.beforeWriteToken(t))&&(t.src&&this.scriptStack.length?this.deferredRemote=t:this._onScriptStart(t),this._writeScriptToken(t,function(){e._onScriptDone(t)}))},t.prototype._handleStyleToken=function(t){var e=this.parser.clear();e&&this.writeQueue.unshift(e),t.type=t.attrs.type||t.attrs.TYPE||"text/css",t=this.options.beforeWriteToken(t),t&&this._writeStyleToken(t),e&&this.write()},t.prototype._writeStyleToken=function(t){var e=this._buildStyle(t);this._insertCursor(e,p),t.content&&(e.styleSheet&&!e.sheet?e.styleSheet.cssText=t.content:e.appendChild(this.doc.createTextNode(t.content)))},t.prototype._buildStyle=function(t){var e=this.doc.createElement(t.tagName);return e.setAttribute("type",t.type),u.eachKey(t.attrs,function(t,r){e.setAttribute(t,r)}),e},t.prototype._insertCursor=function(t,e){this._writeImpl('<span id="'+e+'"/>');var r=this.doc.getElementById(e);r&&r.parentNode.replaceChild(t,r)},t.prototype._onScriptStart=function(t){t.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(t)},t.prototype._onScriptDone=function(t){return t!==this.scriptStack[0]?void this.options.error({msg:"Bad script nesting or script finished twice"}):(this.scriptStack.shift(),this.write.apply(this,t.outerWrites),void(!this.scriptStack.length&&this.deferredRemote&&(this._onScriptStart(this.deferredRemote),this.deferredRemote=null)))},t.prototype._writeScriptToken=function(t,e){var r=this._buildScript(t),i=this._shouldRelease(r),o=this.options.afterAsync;t.src&&(r.src=t.src,this._scriptLoadHandler(r,i?o:function(){e(),o()}));try{this._insertCursor(r,f),r.src&&!i||e()}catch(t){this.options.error(t),e()}},t.prototype._buildScript=function(t){var e=this.doc.createElement(t.tagName);return u.eachKey(t.attrs,function(t,r){e.setAttribute(t,r)}),t.content&&(e.text=t.content),e},t.prototype._scriptLoadHandler=function(t,e){function r(){t=t.onload=t.onreadystatechange=t.onerror=null}function i(){r(),null!=e&&e(),e=null}function o(t){r(),a(t),null!=e&&e(),e=null}function n(t,e){var r=t["on"+e];null!=r&&(t["_on"+e]=r)}var a=this.options.error;n(t,"load"),n(t,"error"),s(t,{onload:function(){if(t._onload)try{t._onload.apply(this,Array.prototype.slice.call(arguments,0))}catch(e){o({msg:"onload handler failed "+e+" @ "+t.src})}i()},onerror:function(){if(t._onerror)try{t._onerror.apply(this,Array.prototype.slice.call(arguments,0))}catch(e){return void o({msg:"onerror handler failed "+e+" @ "+t.src})}o({msg:"remote script failed "+t.src})},onreadystatechange:function(){/^(loaded|complete)$/.test(t.readyState)&&i()}})},t.prototype._shouldRelease=function(t){return!/^script$/i.test(t.nodeName)||!!(this.options.releaseAsync&&t.src&&t.hasAttribute("async"))},t}();e.default=d},function(t,e,r){!function(e,r){t.exports=function(){return function(t){function e(i){if(r[i])return r[i].exports;var o=r[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";var i=r(1),o=function(t){return t&&t.__esModule?t:{default:t}}(i);t.exports=o.default},function(t,e,r){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=r(2),s=i(n),a=r(3),c=i(a),l=r(6),u=function(t){return t&&t.__esModule?t:{default:t}}(l),h=r(5),p={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},f=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),this.stream=r;var n=!1,a={};for(var c in s)s.hasOwnProperty(c)&&(i.autoFix&&(a[c+"Fix"]=!0),n=n||a[c+"Fix"]);n?(this._readToken=(0,u.default)(this,a,function(){return e._readTokenImpl()}),this._peekToken=(0,u.default)(this,a,function(){return e._peekTokenImpl()})):(this._readToken=this._readTokenImpl,this._peekToken=this._peekTokenImpl)}return t.prototype.append=function(t){this.stream+=t},t.prototype.prepend=function(t){this.stream=t+this.stream},t.prototype._readTokenImpl=function(){var t=this._peekTokenImpl();if(t)return this.stream=this.stream.slice(t.length),t},t.prototype._peekTokenImpl=function(){for(var t in p)if(p.hasOwnProperty(t)&&p[t].test(this.stream)){var e=c[t](this.stream);if(e)return"startTag"===e.type&&/script|style/i.test(e.tagName)?null:(e.text=this.stream.substr(0,e.length),e)}},t.prototype.peekToken=function(){return this._peekToken()},t.prototype.readToken=function(){return this._readToken()},t.prototype.readTokens=function(t){for(var e=void 0;e=this.readToken();)if(t[e.type]&&!1===t[e.type](e))return},t.prototype.clear=function(){var t=this.stream;return this.stream="",t},t.prototype.rest=function(){return this.stream},t}();e.default=f,f.tokenToString=function(t){return t.toString()},f.escapeAttributes=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=(0,h.escapeQuotes)(t[r],null));return e},f.supports=s;for(var d in s)s.hasOwnProperty(d)&&(f.browserHasFlaw=f.browserHasFlaw||!s[d]&&d)},function(t,e){"use strict";e.__esModule=!0;var r=!1,i=!1,o=window.document.createElement("div");try{var n="<P><I></P></I>";o.innerHTML=n,e.tagSoup=r=o.innerHTML!==n}catch(t){e.tagSoup=r=!1}try{o.innerHTML="<P><i><P></P></i></P>",e.selfClose=i=2===o.childNodes.length}catch(t){e.selfClose=i=!1}o=null,e.tagSoup=r,e.selfClose=i},function(t,e,r){"use strict";function i(t){var e=t.indexOf("--\x3e");if(e>=0)return new l.CommentToken(t.substr(4,e-1),e+3)}function o(t){var e=t.indexOf("<");return new l.CharsToken(e>=0?e:t.length)}function n(t){if(-1!==t.indexOf(">")){var e=t.match(u.startTag);if(e){var r=function(){var t={},r={},i=e[2];return e[2].replace(u.attr,function(e,o){arguments[2]||arguments[3]||arguments[4]||arguments[5]?arguments[5]?(t[arguments[5]]="",r[arguments[5]]=!0):t[o]=arguments[2]||arguments[3]||arguments[4]||u.fillAttr.test(o)&&o||"":t[o]="",i=i.replace(e,"")}),{v:new l.StartTagToken(e[1],e[0].length,t,r,!!e[3],i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))}}();if("object"===(void 0===r?"undefined":c(r)))return r.v}}}function s(t){var e=n(t);if(e){var r=t.slice(e.length);if(r.match(new RegExp("</\\s*"+e.tagName+"\\s*>","i"))){var i=r.match(new RegExp("([\\s\\S]*?)</\\s*"+e.tagName+"\\s*>","i"));if(i)return new l.AtomicTagToken(e.tagName,i[0].length+e.length,e.attrs,e.booleanAttrs,i[1])}}}function a(t){var e=t.match(u.endTag);if(e)return new l.EndTagToken(e[1],e[0].length)}e.__esModule=!0;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.comment=i,e.chars=o,e.startTag=n,e.atomicTag=s,e.endTag=a;var l=r(4),u={startTag:/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,endTag:/^<\/([\-A-Za-z0-9_]+)[^>]*>/,attr:/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,fillAttr:/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i}},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.EndTagToken=e.AtomicTagToken=e.StartTagToken=e.TagToken=e.CharsToken=e.CommentToken=e.Token=void 0;var o=r(5),n=(e.Token=function t(e,r){i(this,t),this.type=e,this.length=r,this.text=""},e.CommentToken=function(){function t(e,r){i(this,t),this.type="comment",this.length=r||(e?e.length:0),this.text="",this.content=e}return t.prototype.toString=function(){return"\x3c!--"+this.content},t}(),e.CharsToken=function(){function t(e){i(this,t),this.type="chars",this.length=e,this.text=""}return t.prototype.toString=function(){return this.text},t}(),e.TagToken=function(){function t(e,r,o,n,s){i(this,t),this.type=e,this.length=o,this.text="",this.tagName=r,this.attrs=n,this.booleanAttrs=s,this.unary=!1,this.html5Unary=!1}return t.formatTag=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r="<"+t.tagName;for(var i in t.attrs)if(t.attrs.hasOwnProperty(i)){r+=" "+i;var n=t.attrs[i];void 0!==t.booleanAttrs&&void 0!==t.booleanAttrs[i]||(r+='="'+(0,o.escapeQuotes)(n)+'"')}return t.rest&&(r+=" "+t.rest),r+=t.unary&&!t.html5Unary?"/>":">",void 0!==e&&null!==e&&(r+=e+"</"+t.tagName+">"),r},t}());e.StartTagToken=function(){function t(e,r,o,n,s,a){i(this,t),this.type="startTag",this.length=r,this.text="",this.tagName=e,this.attrs=o,this.booleanAttrs=n,this.html5Unary=!1,this.unary=s,this.rest=a}return t.prototype.toString=function(){return n.formatTag(this)},t}(),e.AtomicTagToken=function(){function t(e,r,o,n,s){i(this,t),this.type="atomicTag",this.length=r,this.text="",this.tagName=e,this.attrs=o,this.booleanAttrs=n,this.unary=!1,this.html5Unary=!1,this.content=s}return t.prototype.toString=function(){return n.formatTag(this,this.content)},t}(),e.EndTagToken=function(){function t(e,r){i(this,t),this.type="endTag",this.length=r,this.text="",this.tagName=e}return t.prototype.toString=function(){return"</"+this.tagName+">"},t}()},function(t,e){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t?t.replace(/([^"]*)"/g,function(t,e){return/\\/.test(e)?e+'"':e+'\\"'}):e}e.__esModule=!0,e.escapeQuotes=r},function(t,e){"use strict";function r(t){return t&&"startTag"===t.type&&(t.unary=a.test(t.tagName)||t.unary,t.html5Unary=!/\/>$/.test(t.text)),t}function i(t,e){var i=t.stream,o=r(e());return t.stream=i,o}function o(t,e){var r=e.pop();t.prepend("</"+r.tagName+">")}function n(){var t=[];return t.last=function(){return this[this.length-1]},t.lastTagNameEq=function(t){var e=this.last();return e&&e.tagName&&e.tagName.toUpperCase()===t.toUpperCase()},t.containsTagName=function(t){for(var e,r=0;e=this[r];r++)if(e.tagName===t)return!0;return!1},t}function s(t,e,s){function a(){var e=i(t,s);e&&u[e.type]&&u[e.type](e)}var l=n(),u={startTag:function(r){var i=r.tagName;"TR"===i.toUpperCase()&&l.lastTagNameEq("TABLE")?(t.prepend("<TBODY>"),a()):e.selfCloseFix&&c.test(i)&&l.containsTagName(i)?l.lastTagNameEq(i)?o(t,l):(t.prepend("</"+r.tagName+">"),a()):r.unary||l.push(r)},endTag:function(r){l.last()?e.tagSoupFix&&!l.lastTagNameEq(r.tagName)?o(t,l):l.pop():e.tagSoupFix&&(s(),a())}};return function(){return a(),r(s())}}e.__esModule=!0,e.default=s;var a=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,c=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i}])}()}()},function(t,e){"use strict";function r(t){return void 0!==t&&null!==t}function i(t){return"function"==typeof t}function o(t,e,r){var i=void 0,o=t&&t.length||0;for(i=0;i<o;i++)e.call(r,t[i],i)}function n(t,e,r){for(var i in t)t.hasOwnProperty(i)&&e.call(r,i,t[i])}function s(t,e){return t=t||{},n(e,function(e,i){r(t[e])||(t[e]=i)}),t}function a(t){try{return Array.prototype.slice.call(t)}catch(r){var e=function(){var e=[];return o(t,function(t){e.push(t)}),{v:e}}();if("object"===(void 0===e?"undefined":p(e)))return e.v}}function c(t){return t[t.length-1]}function l(t,e){return!(!t||"startTag"!==t.type&&"atomicTag"!==t.type||!("tagName"in t)||!~t.tagName.toLowerCase().indexOf(e))}function u(t){return l(t,"script")}function h(t){return l(t,"style")}e.__esModule=!0;var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.existy=r,e.isFunction=i,e.each=o,e.eachKey=n,e.defaults=s,e.toArray=a,e.last=c,e.isTag=l,e.isScript=u,e.isStyle=h}])}),function(t,e){function r(){var e,r;l?u="filter":(e=t('<div id="iris-gradtest" />'),r="linear-gradient(top,#fff,#000)",t.each(h,function(t,i){if(e.css("backgroundImage",i+r),e.css("backgroundImage").match("gradient"))return u=t,!1}),!1===u&&(e.css("background","-webkit-gradient(linear,0% 0%,0% 100%,from(#fff),to(#000))"),e.css("backgroundImage").match("gradient")&&(u="webkit")),e.remove())}function i(e,r){return e="top"===e?"top":"left",r=t.isArray(r)?r:Array.prototype.slice.call(arguments,1),"webkit"===u?n(e,r):h[u]+"linear-gradient("+e+", "+r.join(", ")+")"}function o(e,r){var i,o,n,a,c,l,u,h,p;e="top"===e?"top":"left",r=t.isArray(r)?r:Array.prototype.slice.call(arguments,1),i="top"===e?0:1,o=t(this),n=r.length-1,a="filter",c=1===i?"left":"top",l=1===i?"right":"bottom",u=1===i?"height":"width",h='<div class="iris-ie-gradient-shim" style="position:absolute;'+u+":100%;"+c+":%start%;"+l+":%end%;"+a+':%filter%;" data-color:"%color%"></div>',p="","static"===o.css("position")&&o.css({position:"relative"}),r=s(r),t.each(r,function(t,e){var o,s,a;if(t===n)return!1;o=r[t+1],e.stop!==o.stop&&(s=100-parseFloat(o.stop)+"%",e.octoHex=new Color(e.color).toIEOctoHex(),o.octoHex=new Color(o.color).toIEOctoHex(),a="progid:DXImageTransform.Microsoft.Gradient(GradientType="+i+", StartColorStr='"+e.octoHex+"', EndColorStr='"+o.octoHex+"')",p+=h.replace("%start%",e.stop).replace("%end%",s).replace("%filter%",a))}),o.find(".iris-ie-gradient-shim").remove(),t(p).prependTo(o)}function n(e,r){var i=[];return e="top"===e?"0% 0%,0% 100%,":"0% 100%,100% 100%,",r=s(r),t.each(r,function(t,e){i.push("color-stop("+parseFloat(e.stop)/100+", "+e.color+")")}),"-webkit-gradient(linear,"+e+i.join(",")+")"}function s(e){var r=[],i=[],o=[],n=e.length-1;return t.each(e,function(t,e){var o=e,n=!1,s=e.match(/1?[0-9]{1,2}%$/);s&&(o=e.replace(/\s?1?[0-9]{1,2}%$/,""),n=s.shift()),r.push(o),i.push(n)}),!1===i[0]&&(i[0]="0%"),!1===i[n]&&(i[n]="100%"),i=a(i),t.each(i,function(t){o[t]={color:r[t],stop:i[t]}}),o}function a(e){var r,i,o,n,s=0,c=e.length-1,l=0,u=!1;if(e.length<=2||t.inArray(!1,e)<0)return e;for(;l<e.length-1;)u||!1!==e[l]?u&&!1!==e[l]&&(c=l,l=e.length):(s=l-1,u=!0),l++;for(i=c-s,n=parseInt(e[s].replace("%"),10),r=(parseFloat(e[c].replace("%"))-n)/i,l=s+1,o=1;l<c;)e[l]=n+o*r+"%",o++,l++;return a(e)}var c,l,u,h,p,f,d,g,v;if(c='<div class="iris-picker"><div class="iris-picker-inner"><div class="iris-square"><a class="iris-square-value" href="#"><span class="iris-square-handle ui-slider-handle"></span></a><div class="iris-square-inner iris-square-horiz"></div><div class="iris-square-inner iris-square-vert"></div></div><div class="iris-slider iris-strip"><div class="iris-slider-offset"></div></div></div></div>',p='.iris-picker{display:block;position:relative}.iris-picker,.iris-picker *{-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input+.iris-picker{margin-top:4px}.iris-error{background-color:#ffafaf}.iris-border{border-radius:3px;border:1px solid #aaa;width:200px;background-color:#fff}.iris-picker-inner{position:absolute;top:0;right:0;left:0;bottom:0}.iris-border .iris-picker-inner{top:10px;right:10px;left:10px;bottom:10px}.iris-picker .iris-square-inner{position:absolute;left:0;right:0;top:0;bottom:0}.iris-picker .iris-square,.iris-picker .iris-slider,.iris-picker .iris-square-inner,.iris-picker .iris-palette{border-radius:3px;box-shadow:inset 0 0 5px rgba(0,0,0,.4);height:100%;width:12.5%;float:left;margin-right:5%}.iris-picker .iris-square{width:76%;margin-right:10%;position:relative}.iris-picker .iris-square-inner{width:auto;margin:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-square-inner,.iris-ie-9 .iris-palette{box-shadow:none;border-radius:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-palette{outline:1px solid rgba(0,0,0,.1)}.iris-ie-lt9 .iris-square,.iris-ie-lt9 .iris-slider,.iris-ie-lt9 .iris-square-inner,.iris-ie-lt9 .iris-palette{outline:1px solid #aaa}.iris-ie-lt9 .iris-square .ui-slider-handle{outline:1px solid #aaa;background-color:#fff;-ms-filter:"alpha(Opacity=30)"}.iris-ie-lt9 .iris-square .iris-square-handle{background:0;border:3px solid #fff;-ms-filter:"alpha(Opacity=50)"}.iris-picker .iris-strip{margin-right:0;position:relative}.iris-picker .iris-strip .ui-slider-handle{position:absolute;background:0;margin:0;right:-3px;left:-3px;border:4px solid #aaa;border-width:4px 3px;width:auto;height:6px;border-radius:4px;box-shadow:0 1px 2px rgba(0,0,0,.2);opacity:.9;z-index:5;cursor:ns-resize}.iris-strip .ui-slider-handle:before{content:" ";position:absolute;left:-2px;right:-2px;top:-3px;bottom:-3px;border:2px solid #fff;border-radius:3px}.iris-picker .iris-slider-offset{position:absolute;top:11px;left:0;right:0;bottom:-3px;width:auto;height:auto;background:transparent;border:0;border-radius:0}.iris-picker .iris-square-handle{background:transparent;border:5px solid #aaa;border-radius:50%;border-color:rgba(128,128,128,.5);box-shadow:none;width:12px;height:12px;position:absolute;left:-10px;top:-10px;cursor:move;opacity:1;z-index:10}.iris-picker .ui-state-focus .iris-square-handle{opacity:.8}.iris-picker .iris-square-handle:hover{border-color:#999}.iris-picker .iris-square-value:focus .iris-square-handle{box-shadow:0 0 2px rgba(0,0,0,.75);opacity:.8}.iris-picker .iris-square-handle:hover::after{border-color:#fff}.iris-picker .iris-square-handle::after{position:absolute;bottom:-4px;right:-4px;left:-4px;top:-4px;border:3px solid #f9f9f9;border-color:rgba(255,255,255,.8);border-radius:50%;content:" "}.iris-picker .iris-square-value{width:8px;height:8px;position:absolute}.iris-ie-lt9 .iris-square-value,.iris-mozilla .iris-square-value{width:1px;height:1px}.iris-palette-container{position:absolute;bottom:0;left:0;margin:0;padding:0}.iris-border .iris-palette-container{left:10px;bottom:10px}.iris-picker .iris-palette{margin:0;cursor:pointer}.iris-square-handle,.ui-slider-handle{border:0;outline:0}',d=navigator.userAgent.toLowerCase(),g="Microsoft Internet Explorer"===navigator.appName,v=g?parseFloat(d.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,l=g&&v<10,u=!1,h=["-moz-","-webkit-","-o-","-ms-"],l&&v<=7)return t.fn.iris=t.noop,void(t.support.iris=!1);t.support.iris=!0,t.fn.gradient=function(){var e=arguments;return this.each(function(){l?o.apply(this,e):t(this).css("backgroundImage",i.apply(this,e))})},t.fn.raninbowGradient=function(e,r){var i,o,n,s;for(e=e||"top",i=t.extend({},{s:100,l:50},r),o="hsl(%h%,"+i.s+"%,"+i.l+"%)",n=0,s=[];n<=360;)s.push(o.replace("%h%",n)),n+=30;return this.each(function(){t(this).gradient(e,s)})},f={options:{color:!1,mode:"hsl",controls:{horiz:"s",vert:"l",strip:"h"},hide:!0,border:!0,target:!1,width:200,palettes:!1},_color:"",_palettes:["#000","#fff","#d33","#d93","#ee2","#81d742","#1e73be","#8224e3"],_inited:!1,_defaultHSLControls:{horiz:"s",vert:"l",strip:"h"},_defaultHSVControls:{horiz:"h",vert:"v",strip:"s"},_scale:{h:360,s:100,l:100,v:100},_create:function(){var e=this,i=e.element,o=e.options.color||i.val();!1===u&&r(),i.is("input")?(e.options.target?e.picker=t(c).appendTo(e.options.target):e.picker=t(c).insertAfter(i),e._addInputListeners(i)):(i.append(c),e.picker=i.find(".iris-picker")),g?9===v?e.picker.addClass("iris-ie-9"):v<=8&&e.picker.addClass("iris-ie-lt9"):d.indexOf("compatible")<0&&d.indexOf("khtml")<0&&d.match(/mozilla/)&&e.picker.addClass("iris-mozilla"),e.options.palettes&&e._addPalettes(),e._color=new Color(o).setHSpace(e.options.mode),e.options.color=e._color.toString(),e.controls={square:e.picker.find(".iris-square"),squareDrag:e.picker.find(".iris-square-value"),horiz:e.picker.find(".iris-square-horiz"),vert:e.picker.find(".iris-square-vert"),strip:e.picker.find(".iris-strip"),stripSlider:e.picker.find(".iris-strip .iris-slider-offset")},"hsv"===e.options.mode&&e._has("l",e.options.controls)?e.options.controls=e._defaultHSVControls:"hsl"===e.options.mode&&e._has("v",e.options.controls)&&(e.options.controls=e._defaultHSLControls),e.hue=e._color.h(),e.options.hide&&e.picker.hide(),e.options.border&&e.picker.addClass("iris-border"),e._initControls(),e.active="external",e._dimensions(),e._change()},_has:function(e,r){var i=!1;return t.each(r,function(t,r){if(e===r)return i=!0,!1}),i},_addPalettes:function(){var e=t('<div class="iris-palette-container" />'),r=t('<a class="iris-palette" tabindex="0" />'),i=t.isArray(this.options.palettes)?this.options.palettes:this._palettes;this.picker.find(".iris-palette-container").length&&(e=this.picker.find(".iris-palette-container").detach().html("")),t.each(i,function(t,i){r.clone().data("color",i).css("backgroundColor",i).appendTo(e).height(10).width(10)}),this.picker.append(e)},_paint:function(){var t=this;t._paintDimension("top","strip"),t._paintDimension("top","vert"),t._paintDimension("left","horiz")},_paintDimension:function(t,e){var r,i=this,o=i._color,n=i.options.mode,s=i._getHSpaceColor(),a=i.controls[e],c=i.options.controls;if(e!==i.active&&("square"!==i.active||"strip"===e))switch(c[e]){case"h":if("hsv"===n){switch(s=o.clone(),e){case"horiz":s[c.vert](100);break;case"vert":s[c.horiz](100);break;case"strip":s.setHSpace("hsl")}r=s.toHsl()}else r="strip"===e?{s:s.s,l:s.l}:{s:100,l:s.l};a.raninbowGradient(t,r);break;case"s":"hsv"===n?"vert"===e?r=[o.clone().a(0).s(0).toCSS("rgba"),o.clone().a(1).s(0).toCSS("rgba")]:"strip"===e?r=[o.clone().s(100).toCSS("hsl"),o.clone().s(0).toCSS("hsl")]:"horiz"===e&&(r=["#fff","hsl("+s.h+",100%,50%)"]):r="vert"===e&&"h"===i.options.controls.horiz?["hsla(0, 0%, "+s.l+"%, 0)","hsla(0, 0%, "+s.l+"%, 1)"]:["hsl("+s.h+",0%,50%)","hsl("+s.h+",100%,50%)"],a.gradient(t,r);break;case"l":r="strip"===e?["hsl("+s.h+",100%,100%)","hsl("+s.h+", "+s.s+"%,50%)","hsl("+s.h+",100%,0%)"]:["#fff","rgba(255,255,255,0) 50%","rgba(0,0,0,0) 50%","rgba(0,0,0,1)"],a.gradient(t,r);break;case"v":r="strip"===e?[o.clone().v(100).toCSS(),o.clone().v(0).toCSS()]:["rgba(0,0,0,0)","#000"],a.gradient(t,r)}},_getHSpaceColor:function(){return"hsv"===this.options.mode?this._color.toHsv():this._color.toHsl()},_dimensions:function(e){var r,i,o,n,s=this,a=s.options,c=s.controls,l=c.square,u=s.picker.find(".iris-strip"),h="77.5%",p="12%",f=a.border?a.width-20:a.width,d=t.isArray(a.palettes)?a.palettes.length:s._palettes.length;if(e&&(l.css("width",""),u.css("width",""),s.picker.css({width:"",height:""})),h=f*(parseFloat(h)/100),p=f*(parseFloat(p)/100),r=a.border?h+20:h,l.width(h).height(h),u.height(h).width(p),s.picker.css({width:a.width,height:r}),!a.palettes)return s.picker.css("paddingBottom","");i=2*h/100,n=h-(d-1)*i,o=n/d,s.picker.find(".iris-palette").each(function(e){var r=0===e?0:i;t(this).css({width:o,height:o,marginLeft:r})}),s.picker.css("paddingBottom",o+i),u.height(o+i+h)},_addInputListeners:function(t){var e=this,r=function(r){var i=new Color(t.val()),o=t.val().replace(/^#/,"");t.removeClass("iris-error"),i.error?""!==o&&t.addClass("iris-error"):i.toString()!==e._color.toString()&&("keyup"===r.type&&o.match(/^[0-9a-fA-F]{3}$/)||e._setOption("color",i.toString()))};t.on("change",r).on("keyup",e._debounce(r,100)),e.options.hide&&t.one("focus",function(){e.show()})},_initControls:function(){var e=this,r=e.controls,i=r.square,o=e.options.controls,n=e._scale[o.strip];r.stripSlider.slider({orientation:"vertical",max:n,slide:function(t,r){e.active="strip","h"===o.strip&&(r.value=n-r.value),e._color[o.strip](r.value),e._change.apply(e,arguments)}}),r.squareDrag.draggable({containment:r.square.find(".iris-square-inner"),zIndex:1e3,cursor:"move",drag:function(t,r){e._squareDrag(t,r)},start:function(){i.addClass("iris-dragging"),t(this).addClass("ui-state-focus")},stop:function(){i.removeClass("iris-dragging"),t(this).removeClass("ui-state-focus")}}).on("mousedown mouseup",function(r){r.preventDefault(),"mousedown"===r.type?(e.picker.find(".ui-state-focus").removeClass("ui-state-focus").blur(),t(this).addClass("ui-state-focus").focus()):t(this).removeClass("ui-state-focus")}).on("keydown",function(t){var i=r.square,o=r.squareDrag,n=o.position(),s=e.options.width/100;switch(t.altKey&&(s*=10),t.keyCode){case 37:n.left-=s;break;case 38:n.top-=s;break;case 39:n.left+=s;break;case 40:n.top+=s;break;default:return!0}n.left=Math.max(0,Math.min(n.left,i.width())),n.top=Math.max(0,Math.min(n.top,i.height())),o.css(n),e._squareDrag(t,{position:n}),t.preventDefault()}),i.mousedown(function(r){var i,o;1===r.which&&t(r.target).is("div")&&(i=e.controls.square.offset(),o={top:r.pageY-i.top,left:r.pageX-i.left},r.preventDefault(),e._squareDrag(r,{position:o}),r.target=e.controls.squareDrag.get(0),e.controls.squareDrag.css(o).trigger(r))}),e.options.palettes&&e._paletteListeners()},_paletteListeners:function(){var e=this;e.picker.find(".iris-palette-container").on("click.palette",".iris-palette",function(){e._color.fromCSS(t(this).data("color")),e.active="external",e._change()}).on("keydown.palette",".iris-palette",function(e){if(13!==e.keyCode&&32!==e.keyCode)return!0;e.stopPropagation(),t(this).click()})},_squareDrag:function(t,e){var r=this,i=r.options.controls,o=r._squareDimensions(),n=Math.round((o.h-e.position.top)/o.h*r._scale[i.vert]),s=r._scale[i.horiz]-Math.round((o.w-e.position.left)/o.w*r._scale[i.horiz]);r._color[i.horiz](s)[i.vert](n),r.active="square",r._change.apply(r,arguments)},_setOption:function(e,r){var i,o,n=this,s=n.options[e],a=!1;switch(n.options[e]=r,e){case"color":r=""+r,r.replace(/^#/,""),i=new Color(r).setHSpace(n.options.mode),i.error?n.options[e]=s:(n._color=i,n.options.color=n.options[e]=n._color.toString(),n.active="external",n._change());break;case"palettes":a=!0,r?n._addPalettes():n.picker.find(".iris-palette-container").remove(),s||n._paletteListeners();break;case"width":a=!0;break;case"border":a=!0,o=r?"addClass":"removeClass",n.picker[o]("iris-border");break;case"mode":case"controls":if(s===r)return;return o=n.element,s=n.options,s.hide=!n.picker.is(":visible"),n.destroy(),n.picker.remove(),t(n.element).iris(s)}a&&n._dimensions(!0)},_squareDimensions:function(t){var e,r=this.controls.square;return void 0!==t&&r.data("dimensions")?r.data("dimensions"):(this.controls.squareDrag,e={w:r.width(),h:r.height()},r.data("dimensions",e),e)},_isNonHueControl:function(t,e){return"square"===t&&"h"===this.options.controls.strip||"external"!==e&&("h"!==e||"strip"!==t)},_change:function(){var e=this,r=e.controls,i=e._getHSpaceColor(),o=["square","strip"],n=e.options.controls,s=n[e.active]||"external",a=e.hue;"strip"===e.active?o=[]:"external"!==e.active&&o.pop(),t.each(o,function(t,o){var s,a,c;if(o!==e.active)switch(o){case"strip":s="h"===n.strip?e._scale[n.strip]-i[n.strip]:i[n.strip],r.stripSlider.slider("value",s);break;case"square":a=e._squareDimensions(),c={
left:i[n.horiz]/e._scale[n.horiz]*a.w,top:a.h-i[n.vert]/e._scale[n.vert]*a.h},e.controls.squareDrag.css(c)}}),i.h!==a&&e._isNonHueControl(e.active,s)&&e._color.h(a),e.hue=e._color.h(),e.options.color=e._color.toString(),e._inited&&e._trigger("change",{type:e.active},{color:e._color}),e.element.is(":input")&&!e._color.error&&(e.element.removeClass("iris-error"),e.element.val()!==e._color.toString()&&e.element.val(e._color.toString())),e._paint(),e._inited=!0,e.active=!1},_debounce:function(t,e,r){var i,o;return function(){var n,s,a=this,c=arguments;return n=function(){i=null,r||(o=t.apply(a,c))},s=r&&!i,clearTimeout(i),i=setTimeout(n,e),s&&(o=t.apply(a,c)),o}},show:function(){this.picker.show()},hide:function(){this.picker.hide()},toggle:function(){this.picker.toggle()},color:function(t){return!0===t?this._color.clone():void 0===t?this._color.toString():void this.option("color",t)}},t.widget("a8c.iris",f),t('<style id="iris-css">'+p+"</style>").appendTo("head")}(jQuery),function(t,e){var r=function(t,e){return this instanceof r?this._init(t,e):new r(t,e)};r.fn=r.prototype={_color:0,_alpha:1,error:!1,_hsl:{h:0,s:0,l:0},_hsv:{h:0,s:0,v:0},_hSpace:"hsl",_init:function(t){var r="noop";switch(typeof t){case"object":return t.a!==e&&this.a(t.a),r=t.r!==e?"fromRgb":t.l!==e?"fromHsl":t.v!==e?"fromHsv":r,this[r](t);case"string":return this.fromCSS(t);case"number":return this.fromInt(parseInt(t,10))}return this},_error:function(){return this.error=!0,this},clone:function(){for(var t=new r(this.toInt()),e=["_alpha","_hSpace","_hsl","_hsv","error"],i=e.length-1;i>=0;i--)t[e[i]]=this[e[i]];return t},setHSpace:function(t){return this._hSpace="hsv"===t?t:"hsl",this},noop:function(){return this},fromCSS:function(t){var e,r=/^(rgb|hs(l|v))a?\(/;if(this.error=!1,t=t.replace(/^\s+/,"").replace(/\s+$/,"").replace(/;$/,""),t.match(r)&&t.match(/\)$/)){if(e=t.replace(/(\s|%)/g,"").replace(r,"").replace(/,?\);?$/,"").split(","),e.length<3)return this._error();if(4===e.length&&(this.a(parseFloat(e.pop())),this.error))return this;for(var i=e.length-1;i>=0;i--)if(e[i]=parseInt(e[i],10),isNaN(e[i]))return this._error();return t.match(/^rgb/)?this.fromRgb({r:e[0],g:e[1],b:e[2]}):t.match(/^hsv/)?this.fromHsv({h:e[0],s:e[1],v:e[2]}):this.fromHsl({h:e[0],s:e[1],l:e[2]})}return this.fromHex(t)},fromRgb:function(t,r){return"object"!=typeof t||t.r===e||t.g===e||t.b===e?this._error():(this.error=!1,this.fromInt(parseInt((t.r<<16)+(t.g<<8)+t.b,10),r))},fromHex:function(t){return t=t.replace(/^#/,"").replace(/^0x/,""),3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),this.error=!/^[0-9A-F]{6}$/i.test(t),this.fromInt(parseInt(t,16))},fromHsl:function(t){var r,i,o,n,s,a,c,l;return"object"!=typeof t||t.h===e||t.s===e||t.l===e?this._error():(this._hsl=t,this._hSpace="hsl",a=t.h/360,c=t.s/100,l=t.l/100,0===c?r=i=o=l:(n=l<.5?l*(1+c):l+c-l*c,s=2*l-n,r=this.hue2rgb(s,n,a+1/3),i=this.hue2rgb(s,n,a),o=this.hue2rgb(s,n,a-1/3)),this.fromRgb({r:255*r,g:255*i,b:255*o},!0))},fromHsv:function(t){var r,i,o,n,s,a,c,l,u,h,p;if("object"!=typeof t||t.h===e||t.s===e||t.v===e)return this._error();switch(this._hsv=t,this._hSpace="hsv",r=t.h/360,i=t.s/100,o=t.v/100,c=Math.floor(6*r),l=6*r-c,u=o*(1-i),h=o*(1-l*i),p=o*(1-(1-l)*i),c%6){case 0:n=o,s=p,a=u;break;case 1:n=h,s=o,a=u;break;case 2:n=u,s=o,a=p;break;case 3:n=u,s=h,a=o;break;case 4:n=p,s=u,a=o;break;case 5:n=o,s=u,a=h}return this.fromRgb({r:255*n,g:255*s,b:255*a},!0)},fromInt:function(t,r){return this._color=parseInt(t,10),isNaN(this._color)&&(this._color=0),this._color>16777215?this._color=16777215:this._color<0&&(this._color=0),r===e&&(this._hsv.h=this._hsv.s=this._hsl.h=this._hsl.s=0),this},hue2rgb:function(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t},toString:function(){var t=parseInt(this._color,10).toString(16);if(this.error)return"";if(t.length<6)for(var e=6-t.length-1;e>=0;e--)t="0"+t;return"#"+t},toCSS:function(t,e){switch(t=t||"hex",e=parseFloat(e||this._alpha),t){case"rgb":case"rgba":var r=this.toRgb();return e<1?"rgba( "+r.r+", "+r.g+", "+r.b+", "+e+" )":"rgb( "+r.r+", "+r.g+", "+r.b+" )";case"hsl":case"hsla":var i=this.toHsl();return e<1?"hsla( "+i.h+", "+i.s+"%, "+i.l+"%, "+e+" )":"hsl( "+i.h+", "+i.s+"%, "+i.l+"% )";default:return this.toString()}},toRgb:function(){return{r:255&this._color>>16,g:255&this._color>>8,b:255&this._color}},toHsl:function(){var t,e,r=this.toRgb(),i=r.r/255,o=r.g/255,n=r.b/255,s=Math.max(i,o,n),a=Math.min(i,o,n),c=(s+a)/2;if(s===a)t=e=0;else{var l=s-a;switch(e=c>.5?l/(2-s-a):l/(s+a),s){case i:t=(o-n)/l+(o<n?6:0);break;case o:t=(n-i)/l+2;break;case n:t=(i-o)/l+4}t/=6}return t=Math.round(360*t),0===t&&this._hsl.h!==t&&(t=this._hsl.h),e=Math.round(100*e),0===e&&this._hsl.s&&(e=this._hsl.s),{h:t,s:e,l:Math.round(100*c)}},toHsv:function(){var t,e,r=this.toRgb(),i=r.r/255,o=r.g/255,n=r.b/255,s=Math.max(i,o,n),a=Math.min(i,o,n),c=s,l=s-a;if(e=0===s?0:l/s,s===a)t=e=0;else{switch(s){case i:t=(o-n)/l+(o<n?6:0);break;case o:t=(n-i)/l+2;break;case n:t=(i-o)/l+4}t/=6}return t=Math.round(360*t),0===t&&this._hsv.h!==t&&(t=this._hsv.h),e=Math.round(100*e),0===e&&this._hsv.s&&(e=this._hsv.s),{h:t,s:e,v:Math.round(100*c)}},toInt:function(){return this._color},toIEOctoHex:function(){var t=this.toString(),e=parseInt(255*this._alpha,10).toString(16);return 1===e.length&&(e="0"+e),"#"+e+t.replace(/^#/,"")},toLuminosity:function(){var t=this.toRgb();return.2126*Math.pow(t.r/255,2.2)+.7152*Math.pow(t.g/255,2.2)+.0722*Math.pow(t.b/255,2.2)},getDistanceLuminosityFrom:function(t){if(!(t instanceof r))throw"getDistanceLuminosityFrom requires a Color object";var e=this.toLuminosity(),i=t.toLuminosity();return e>i?(e+.05)/(i+.05):(i+.05)/(e+.05)},getMaxContrastColor:function(){var t=this.toLuminosity();return new r(t>=.5?"000000":"ffffff")},getReadableContrastingColor:function(t,i){if(!t instanceof r)return this;var o=i===e?5:i,n=t.getDistanceLuminosityFrom(this),s=t.getMaxContrastColor();if(s.getDistanceLuminosityFrom(t)<=o)return s;if(n>=o)return this;for(var a=0===s.toInt()?-1:1;n<o&&(this.l(a,!0),n=this.getDistanceLuminosityFrom(t),0!==this._color&&16777215!==this._color););return this},a:function(t){if(t===e)return this._alpha;var r=parseFloat(t);return isNaN(r)?this._error():(this._alpha=r,this)},darken:function(t){return t=t||5,this.l(-t,!0)},lighten:function(t){return t=t||5,this.l(t,!0)},saturate:function(t){return t=t||15,this.s(t,!0)},desaturate:function(t){return t=t||15,this.s(-t,!0)},toGrayscale:function(){return this.setHSpace("hsl").s(0)},getComplement:function(){return this.h(180,!0)},getSplitComplement:function(t){t=t||1;var e=180+30*t;return this.h(e,!0)},getAnalog:function(t){t=t||1;var e=30*t;return this.h(e,!0)},getTetrad:function(t){t=t||1;var e=60*t;return this.h(e,!0)},getTriad:function(t){t=t||1;var e=120*t;return this.h(e,!0)},_partial:function(t){var r=i[t];return function(i,o){var n=this._spaceFunc("to",r.space);return i===e?n[t]:(!0===o&&(i=n[t]+i),r.mod&&(i%=r.mod),r.range&&(i=i<r.range[0]?r.range[0]:i>r.range[1]?r.range[1]:i),n[t]=i,this._spaceFunc("from",r.space,n))}},_spaceFunc:function(t,e,r){var i=e||this._hSpace;return this[t+i.charAt(0).toUpperCase()+i.substr(1)](r)}};var i={h:{mod:360},s:{range:[0,100]},l:{space:"hsl",range:[0,100]},v:{space:"hsv",range:[0,100]},r:{space:"rgb",range:[0,255]},g:{space:"rgb",range:[0,255]},b:{space:"rgb",range:[0,255]}};for(var o in i)i.hasOwnProperty(o)&&(r.fn[o]=r.fn._partial(o));"object"==typeof exports?module.exports=r:t.Color=r}(this);